<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tierra y Luna Detalladas</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: black;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
<canvas id="scene"></canvas>

<script>
  // Configuración inicial
  const canvas = document.getElementById('scene');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  // Parámetros de la simulación
  const centerX = canvas.width / 2;
  const centerY = canvas.height / 2;

  // Texturas
  const earthTexture = new Image();
  const moonTexture = new Image();
  earthTexture.src = 'https://raw.githubusercontent.com/cosmos-book/assets/main/earth_daymap.jpg';
  moonTexture.src = 'https://raw.githubusercontent.com/cosmos-book/assets/main/moonmap.jpg';

  // Variables para rotaciones
  let earthRotation = 0;
  let moonRotation = 0;
  let moonOrbitAngle = 0;

  // Dimensiones
  const earthRadius = 150;
  const moonRadius = 50;
  const moonOrbitRadius = 300;

  // Dibujar la Tierra
  function drawEarth() {
    ctx.save();
    ctx.translate(centerX, centerY);
    ctx.rotate(earthRotation);

    ctx.beginPath();
    ctx.arc(0, 0, earthRadius, 0, Math.PI * 2);
    ctx.closePath();
    ctx.clip();

    ctx.drawImage(earthTexture, -earthRadius, -earthRadius, earthRadius * 2, earthRadius * 2);

    ctx.restore();
  }

  // Dibujar la Luna
  function drawMoon() {
    const moonX = centerX + moonOrbitRadius * Math.cos(moonOrbitAngle);
    const moonY = centerY + moonOrbitRadius * Math.sin(moonOrbitAngle);

    ctx.save();
    ctx.translate(moonX, moonY);
    ctx.rotate(moonRotation);

    ctx.beginPath();
    ctx.arc(0, 0, moonRadius, 0, Math.PI * 2);
    ctx.closePath();
    ctx.clip();

    ctx.drawImage(moonTexture, -moonRadius, -moonRadius, moonRadius * 2, moonRadius * 2);

    ctx.restore();
  }

  // Dibujar las luces de las ciudades
  function drawCityLights() {
    for (let i = 0; i < 500; i++) {
      const lat = Math.random() * Math.PI - Math.PI / 2; // Latitud
      const lon = Math.random() * Math.PI * 2; // Longitud
      const x = centerX + earthRadius * Math.cos(lat) * Math.cos(lon);
      const y = centerY + earthRadius * Math.cos(lat) * Math.sin(lon);

      ctx.fillStyle = `rgba(255, 204, 0, ${0.5 + 0.5 * Math.random()})`;
      ctx.beginPath();
      ctx.arc(x, y, 2, 0, Math.PI * 2);
      ctx.fill();
    }
  }

  // Animación principal
  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Dibujar la Tierra y la Luna
    drawEarth();
    drawCityLights();
    drawMoon();

    // Actualizar rotaciones
    earthRotation += 0.01;
    moonRotation += 0.02;
    moonOrbitAngle += 0.01;

    requestAnimationFrame(animate);
  }

  // Iniciar la animación una vez cargadas las texturas
  earthTexture.onload = () => {
    moonTexture.onload = animate;
  };

  // Redimensionar el canvas al ajustar la ventana
  window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  });
</script>
</body>
</html>
