// Configuración inicial
const canvas = document.createElement('canvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
document.body.appendChild(canvas);

const elements = [
  { name: 'Hidrógeno', atomicNumber: 1, color: '#FF0000', radius: 10 },
  { name: 'Helio', atomicNumber: 2, color: '#FFD700', radius: 12 },
  { name: 'Litio', atomicNumber: 3, color: '#32CD32', radius: 14 },
  { name: 'Berilio', atomicNumber: 4, color: '#8A2BE2', radius: 14 },
  { name: 'Boro', atomicNumber: 5, color: '#FF6347', radius: 16 },
  { name: 'Carbono', atomicNumber: 6, color: '#A9A9A9', radius: 16 },
  { name: 'Nitrógeno', atomicNumber: 7, color: '#00FFFF', radius: 16 },
  { name: 'Oxígeno', atomicNumber: 8, color: '#FF4500', radius: 16 },
  { name: 'Flúor', atomicNumber: 9, color: '#7FFF00', radius: 16 },
  { name: 'Neón', atomicNumber: 10, color: '#6495ED', radius: 16 },
  // Añadir más elementos según sea necesario
];

const hydrogen = elements[0];
const centerX = canvas.width / 2;
const centerY = canvas.height / 2;
const maxOrbitRadius = 300;
const speedFactor = 0.005;

function drawOrbit(x, y, size) {
  ctx.strokeStyle = '#0000FF';
  ctx.beginPath();
  ctx.moveTo(x, y - size);
  ctx.lineTo(x + size, y);
  ctx.lineTo(x, y + size);
  ctx.lineTo(x - size, y);
  ctx.closePath();
  ctx.stroke();
}

function drawElement(x, y, element) {
  ctx.fillStyle = element.color;
  ctx.beginPath();
  ctx.ellipse(x, y, element.radius, element.radius, 0, 0, Math.PI * 2);
  ctx.fill();
  ctx.fillStyle = '#FFFFFF';
  ctx.font = '12px Arial';
  ctx.textAlign = 'center';
  ctx.fillText(`${element.atomicNumber} ${element.name}`, x, y + element.radius + 12);
}

function randomIrregularShape(x, y, size, context) {
  const points = 6 + Math.floor(Math.random() * 5);
  const angleStep = (Math.PI * 2) / points;
  context.beginPath();
  for (let i = 0; i < points; i++) {
    const angle = i * angleStep;
    const radius = size + Math.random() * size * 0.4;
    const px = x + Math.cos(angle) * radius;
    const py = y + Math.sin(angle) * radius;
    if (i === 0) {
      context.moveTo(px, py);
    } else {
      context.lineTo(px, py);
    }
  }
  context.closePath();
  context.fill();
}

const elementStates = elements.map((element, index) => {
  const orbitRadius = maxOrbitRadius * ((index + 1) / elements.length);
  return {
    ...element,
    angle: Math.random() * Math.PI * 2,
    orbitRadius,
  };
});

function updateElements() {
  for (const state of elementStates) {
    state.angle += speedFactor * (state.atomicNumber % 5 + 1);
  }
}

function checkCollisions() {
  for (let i = 1; i < elementStates.length; i++) {
    for (let j = i + 1; j < elementStates.length; j++) {
      const dx = elementStates[i].x - elementStates[j].x;
      const dy = elementStates[i].y - elementStates[j].y;
      const distance = Math.sqrt(dx * dx + dy * dy);
      if (distance < elementStates[i].radius + elementStates[j].radius) {
        elementStates[i].angle += Math.PI;
        elementStates[j].angle += Math.PI;
      }
    }
  }
}

function regenerateElements() {
  for (let i = 1; i < elementStates.length; i++) {
    elementStates[i].angle = Math.random() * Math.PI * 2;
  }
}

function drawScene() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawElement(centerX, centerY, hydrogen);

  for (const state of elementStates) {
    if (state.name === 'Hidrógeno') continue;

    const x = centerX + Math.cos(state.angle) * state.orbitRadius;
    const y = centerY + Math.sin(state.angle) * state.orbitRadius;
    state.x = x;
    state.y = y;

    drawOrbit(centerX, centerY, state.orbitRadius);
    drawElement(x, y, state);
  }
}

function loop() {
  updateElements();
  checkCollisions();
  drawScene();
  requestAnimationFrame(loop);
}

loop();
    
